<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>HieuAI ğŸ”¥</title>
  <style>
    * { margin:0; padding:0; box-sizing:border-box; }
    body { font-family: system-ui; background:#000; color:#fff; height:100vh; display:flex; flex-direction:column; }
    #header { padding:20px; text-align:center; font-size:28px; background:linear-gradient(90deg,#ff2483,#00ff9d); -webkit-background-clip:text; color:transparent; }
    #messages { flex:1; overflow-y:auto; padding:20px; display:flex; flex-direction:column; gap:12px; }
    .msg { max-width:80%; padding:14px 20px; border-radius:20px; line-height:1.5; align-self:flex-start; background:#222; }
    .user { align-self:flex-end; background:#00ff9d; color:#000; border-bottom-right-radius:4px; }
    #input-box { padding:15px; display:flex; gap:10px; background:#111; }
    input { flex:1; padding:18px; border-radius:50px; border:none; background:#222; color:white; font-size:18px; }
    button { width:60px; height:60px; border-radius:50%; border:none; background:#00ff9d; font-size:24px; cursor:pointer; }
  </style>
</head>
<body>
  <div id="header">HieuAI ğŸ”¥</div>
  <div id="messages"></div>
  <div id="input-box">
    <input type="text" id="msg" placeholder="NÃ³i gÃ¬ Ä‘i bro..." autocomplete="off"/>
    <button>ğŸš€</button>
  </div>

  <script>
    const sessionId = 'sess_' + Date.now();
    const messagesDiv = document.getElementById('messages');

    function add(text, sender) {
      const div = document.createElement('div');
      div.className = 'msg ' + (sender === 'user' ? 'user' : '');
      div.innerHTML = text.replace(/\n/g, '<br/>);
      messagesDiv.appendChild(div);
      messagesDiv.scrollTop = messagesDiv.scrollHeight;
    }

    async function send() {
      const input = document.getElementById('msg');
      const text = input.value.trim();
      if (!text) return;
      add(text, 'user');
      input.value = '';

      const res = await fetch('/chat', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ message: text, sessionId })
      });
      const data = await res.json();
      add(data.reply || "ÃŠ bro lag tÃ­, há»i láº¡i Ä‘i â¤ï¸", '');
    }

    document.querySelector('button').onclick = send;
    document.getElementById('msg').addEventListener('keypress', e => {
      if (e.key === 'Enter') send();
    });

    // Khá»Ÿi Ä‘á»™ng chÃ o há»i
    add("ÃŠ bro, tháº±ng báº¡n chÃ­ cá»‘t Ä‘Ã¢y! Muá»‘n viáº¿t code, hay tÃ¬m tin tá»©c gÃ¬ cá»© Ä‘áº­p â€“ tao chÆ¡i háº¿t! â¤ï¸", '');
  </script>
</body>
</html>
